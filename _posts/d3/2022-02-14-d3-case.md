---
layout: post
title: d3 basic charts
categories: [d3]
description: d3 basic charts
keywords: d3, charts
---

<iframe name="codemirror" font-size="14" src="{{ site.url }}/packages/apps/codemirror/lib/index.html">
function createSvg({ width = '100%', height = '100%', bg = 'transparent' } = {}) {
  d3.selectAll('div.section')
    .remove()
  const svg = d3.select('#console')
    .append('div')
    .attr('class', 'section')
    .style('background', bg)
    .append('svg')
    .attr('width', width)
    .attr('height', height)
  return svg
}
// 水平x轴柱状图
function chart1() {
  const svg = createSvg()
  // 水平柱的长度
  const dataSet = [10, 30, 70, 20, 50, 60]
  const xScale = d3.scaleLinear()
    .domain([0, 100])
    .range([0, 300])
  const g = svg.append('g')
    .attr('transform', 'translate(10, 10)')  
  g.selectAll('rect')
    .data(dataSet)
    .enter()
    .append('rect')
    .attr('x', 0) // 矩形左上角x坐标
    .attr('y', (d, i) => i * 20) // 矩形左上角y坐标
    .attr('width', 0)
    .attr('height', 10)
    .attr('fill', 'blue')
    .transition()
    .duration(500)
    .delay((d, i) => i * 100)
    .attr('width', d => xScale(d))
  const xAxis = d3.axisBottom(xScale)
    .ticks(10)
  g.append('g')
    .attr('transform', `translate(0, ${20 * dataSet.length})`)
    .call(xAxis)
}
chart1()
</iframe>